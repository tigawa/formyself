box: debian
build:
  steps:
    - arjen/hugo-build:
        version: 0.12
        theme: hugo-icarus-theme
        flags: --buildDrafts=true
    - script:
        name: create old RSS file
        code: |
          cp public/index.xml public/atom.xml
deploy:
  steps:
    - install-packages:
        packages: git ssh-client
    - lukevivier/gh-pages@0.2.1:
        token: $GITHUB_TOKEN
        domain: tigawa.github.com
        basedir: public
        repo: tigawa/tigawa.github.com
    - script:
        name: clean
        code: |
          sudo apt-get update
          sudo apt-get install -f
          sudo rm -rf /var/lib/apt/lists/*
          sudo apt-get update
